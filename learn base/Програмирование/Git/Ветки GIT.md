---
git: 2024-04-24
---
#### Зачем нужны ветки

**Ветка** (англ. _branch_) — это изолированный поток разработки проекта. В таком потоке можно проверять разные идеи, тестировать новую функциональность и так далее.

Ветки позволяют экспериментировать с проектом в Git, но при этом сохранять репозиторий в стабильном состоянии. Каждый член команды может работать в своей ветке и не мешать другим: коммиты, которые он сделает, не будут видны из других веток. А когда работа будет доделана, ветки можно соединить.

Ветки полезны, даже если вы работаете в одиночку — например, над сайтом. Прежде чем писать новую функциональность, для неё следует создать отдельную ветку. Также ветки позволяют одному человеку переключаться между несколькими задачами сразу.

#### Просмотреть ветки проекта — `git branch`

При вызове `git branch` выводятся ветки, которые есть в проекте. Звёздочкой (`*`) отмечено, в какой ветке вы находитесь в текущий момент.

Создать ветку — `git branch <название_ветки>`

#### Переключиться на другую ветку — `git checkout <название_ветки>`
![[Pasted image 20240424140744.png]]
Строчка `Switched to branch...` сообщает, на какую ветку вы только что переключились.

#### Создать ветку и сразу переключиться на неё — `git checkout -b <название_ветки>`

Можно создать ветку и сразу начать в ней работать. За это отвечает команда `git checkout` с флагом `-b` (от англ. _**b**ranch_) и названием ветки. Эта команда делает то же самое, что и последовательность команд `git branch %название-ветки% && git checkout %название-ветки%`.
#### Сравнить ветки — `git diff <название_ветки1> <название_ветки2>`
При сравнении вы также можете использовать название ветки и хеш коммита. Для этого сначала выполните команду `git log --oneline`, чтобы вывести список коммитов.
#### Суффикс навигации `~`

Сравнивать хеши комитов может быть неудобно, ведь в одной ветке их может быть много. Представьте: сначала вы выводите историю через `git log`, затем ищете в длинном списке хеши тех коммитов, которые хотите сравнить, и только потом выполняете `git diff`.

Для облегчения этой задачи в Git есть суффикс навигации `~N`, где `N` — это число. Он отсчитывает от заданного коммита `N` коммитов назад во времени. Нумерация начинается с нуля: `commit~0` — это сам коммит, `commit~1` — предыдущий, `commit~2` — предшествующий предыдущему и так далее.

Например, `HEAD~1` — это следующий за текущим коммит. А `main~5` — это пятый коммит в ветке `main`, если считать с последнего выполненного коммита.

На практике чаще нужен либо текущий коммит (`HEAD`), либо следующий за ним (`HEAD~1`). Для `~1` есть специальное сокращение `~` (без числа). То есть вместо `HEAD~1` обычно пишут просто `HEAD~`.
#### Выполнить слияние — `git merge <название_ветки>`

#### Удалить ветку после объединения — `git branch -D <название_ветки>`

После того как произошло слияние, ветку-донора можно удалить. Для этого в основной ветке введите команду `git branch` с флагом `-D`  и названием ветки.
У команды `git branch -D` есть более безопасный вариант с флагом `-d`. Он удалит ветку только если она была полностью объединена с другой — то есть если две ветки стали (или изначально были) частью одной истории. Например, если вы нечаянно создали ветку с неправильным названием, её можно удалить через `git branch -d %имя_ветки%`.

⚠️ Удаление локальной ветки через Git не удаляет ветку на GitHub!

## Шпаргалка. Работа с ветками
### Клонирование чужого репозитория

`git clone git@github.com:YandexPraktikum/first-project.git` (от англ. _clone_, «клон», «копия») — склонируй репозиторий с URL `first-project.git` из аккаунта `YandexPraktikum` на мой локальный компьютер.

### Создание веток

`git branch feature/the-finest-branch` (от англ. _branch_, «ветка») — создай ветку от текущей с названием `feature/the-finest-branch`;

`git checkout -b feature/the-finest-branch` — создай ветку `feature/the-finest-branch` и сразу переключись на неё.

### Навигация по веткам

`git branch` (от англ. _branch_, «ветка») — покажи, какие есть ветки в репозитории и в какой из них я нахожусь (текущая ветка будет отмечена символом `*`);

`git branch -a` — покажи все известные ветки, как локальные (в локальном репозитории), так и удалённые (в `origin`, или на GitHub).

`git checkout feature/br` — переключись на ветку `feature/br`.

### Сравнение веток

`git diff main HEAD` (от англ. _**diff**erence_, «отличие», «разница») — покажи разницу между веткой `main` и указателем на `HEAD`;

`git diff HEAD~2 HEAD` — покажи разницу между тем коммитом, который был два коммита назад, и текущим.

### Удаление веток

`git branch -d br-name` — удали ветку `br-name`, но только если она является частью `main`;

`git branch -D br-name` — удали ветку `br-name`, даже если она не объединена с `main`.

### Слияние веток

`git merge main` (от англ. _merge_, «сливать», «поглощать») — объедини ветку `main` с текущей активной веткой.

### Работа с удалённым репозиторием

`git push -u origin my-branch` (от англ. _push_, «толкнуть», «протолкнуть») — отправь новую ветку `my-branch` в удалённый репозиторий и свяжи локальную ветку с удалённой, чтобы при дополнительных коммитах можно было писать просто `git push` без `-u`;

`git push my-branch` — отправь дополнительные изменения в ветку `my-branch`, которая уже существует в удалённом репозитории;

`git pull` (от англ. _pull_, «вытянуть») — подтяни изменения текущей ветки из удалённого репозитория.