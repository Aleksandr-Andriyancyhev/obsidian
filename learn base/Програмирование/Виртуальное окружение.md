---
venv: 2024-05-03
---
#### Почему нужно виртуальное окружение

Допустим у нас есть два проекта: "Project A" и "Project B". Оба проекта зависят от библиотеки Simplejson. Проблема возникает, когда для "Project A" нужна версия Simplejson 3.0.0, а для проекта "Project B" — 3.17.0. Python не может различить версии в глобальном каталоге `site-packages` — в нем останется только та версия пакета, которая была установлена последней.

> Решение данной проблемы — создание виртуального окружения (virtual environment).
> 
> Основная цель виртуального окружения Python — создание изолированной среды для python-проектов

#### Создание виртуального окружения

Для создания виртуального окружения, перейдите в директорию своего проекта и выполните:

```terminal
python -m venv venv
```

`-m` — флаг для запуска `venv` как исполняемого модуля. 
`venv` — название виртуального окружения (где будут храниться ваши библиотеки).

#### Активация
Чтобы начать пользоваться виртуальным окружением, необходимо его активировать:

- `venv\Scripts\activate.bat` - для Windows;
- `source venv/bin/activate` - для Linux и MacOS.

Проверить успешность активации можно по приглашению оболочки. Она будет выглядеть так:
![[Pasted image 20240503222936.png]]

Так же проверку подключения можно проверить по новому пути до библиотек выполнив команду:
```terminal
python -c "import site; print(site.getsitepackages())"
```
#### Деактивация
Закончив работу в виртуальной среде, вы можете отключить ее, выполнив консольную команду:

```terminal
deactivate
```

#### pip freeze
`pip freeze` requirements.txt — команда, которая позволяет создать текстовый документ, в котором перечислены все установленные и необходимые для работы Python приложения программные пакеты.

> [!Но будьте внимательны]
> При вызове команды `pip freeze` вы получите все установленные зависимости на вашей системе или в виртуальном окружении. Поэтому советую испльзовать ее только в вашем виртуальном окружении и следить чтобы в нем не были установлены лишние пакеты.

###### Создание файла зависимостей и установка их
Для этого вам достаточно перейти в корневой каталог проекта, где хранятся ваши `.py`-файлы, и создать текстовый документ `requirements.txt`. Важно убедиться, чтобы название было именно таким.

Также этот файл может быть сгенерирован автоматически с помощью следующей команды:

```terminal
pip freeze > requirements.txt
```

Для того чтобы установить пакеты из `requirements.txt`, необходимо открыть командную строку, перейти в каталог проекта и ввести следующую команду:

```terminal
pip install -r requirements.txt
```